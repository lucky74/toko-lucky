<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Lucky Kue Sus</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* Kembalikan Desain Mewah Asli Anda */
        body { font-family: 'Segoe UI', sans-serif; background: #fdf2e9; margin: 0; padding: 15px; }
        .item-card { background: white; border-radius: 15px; margin-bottom: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; align-items: center; padding: 10px; }
        .item-img { width: 80px; height: 80px; border-radius: 10px; object-fit: cover; }
        .item-detail { flex: 1; padding-left: 15px; }
        .item-detail h3 { margin: 0; font-size: 16px; color: #d35400; }
        .item-detail p { margin: 5px 0; font-size: 14px; font-weight: bold; }
        
        /* Fitur Naik-Turun (Plus-Minus) */
        .counter-box { display: flex; align-items: center; gap: 10px; background: #fdf2e9; padding: 5px 10px; border-radius: 20px; }
        .btn-qty { background: #e67e22; color: white; border: none; width: 25px; height: 25px; border-radius: 50%; font-weight: bold; cursor: pointer; }
        .qty-num { font-weight: bold; min-width: 15px; text-align: center; }

        /* Panel Pembayaran & Diskon */
        .payment-box { background: white; padding: 15px; border-radius: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
        .row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; }
        .total-row { border-top: 1px solid #eee; padding-top: 10px; font-weight: bold; font-size: 18px; color: #d35400; }
        .btn-pay { width: 100%; background: #27ae60; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; font-size: 16px; margin-top: 10px; }
    </style>
</head>
<body>

    <h2 style="text-align: center; color: #d35400;">ü•ê Menu Lucky Kue Sus</h2>

    <div class="item-card">
        <img src="https://ik.imagekit.io/uu3h5rnaw/images.jpg" class="item-img">
        <div class="item-detail">
            <h3>Sus Strawberry</h3>
            <p>Rp 15.000</p>
        </div>
        <div class="counter-box">
            <button class="btn-qty" onclick="changeQty('strawberry', -1)">-</button>
            <span class="qty-num" id="q-strawberry">0</span>
            <button class="btn-qty" onclick="changeQty('strawberry', 1)">+</button>
        </div>
    </div>

    <div class="item-card">
        <img src="https://ik.imagekit.io/uu3h5rnaw/images.jpg" class="item-img">
        <div class="item-detail">
            <h3>Sus Keju</h3>
            <p>Rp 15.000</p>
        </div>
        <div class="counter-box">
            <button class="btn-qty" onclick="changeQty('keju', -1)">-</button>
            <span class="qty-num" id="q-keju">0</span>
            <button class="btn-qty" onclick="changeQty('keju', 1)">+</button>
        </div>
    </div>

    <div class="payment-box">
        <div class="row"><span>Subtotal</span> <span id="sub-txt">Rp 0</span></div>
        <div class="row" style="color: #27ae60;"><span>Diskon Level (5%)</span> <span id="disc-txt">-Rp 0</span></div>
        <div class="row total-row"><span>Total Bayar</span> <span id="total-txt">Rp 0</span></div>
        <button class="btn-pay" onclick="kirimStruk()">SAYA SUDAH BAYAR</button>
    </div>

<script>
    let tg = window.Telegram.WebApp;
    let qty = { strawberry: 0, keju: 0 };
    let harga = 15000;
    
    // Level 1 = 5%. Level 2 = 7% (Naik 2 angka sesuai perintah Anda)
    let diskonPersen = 5; 

    function changeQty(item, delta) {
        qty[item] = Math.max(0, qty[item] + delta);
        document.getElementById('q-' + item).innerText = qty[item];
        hitung();
    }

    function hitung() {
        let sub = (qty.strawberry + qty.keju) * harga;
        let pot = (sub * diskonPersen) / 100;
        let total = sub - pot;

        document.getElementById('sub-txt').innerText = "Rp " + sub.toLocaleString();
        document.getElementById('disc-txt').innerText = "-Rp " + pot.toLocaleString();
        document.getElementById('total-txt').innerText = "Rp " + total.toLocaleString();
        return { sub, pot, total };
    }

    function kirimStruk() {
        let data = hitung();
        if (data.sub === 0) return alert("Pilih pesanan Anda!");

        let struk = `PESANAN ANDA:\n`;
        if(qty.strawberry > 0) struk += `- Sus Strawberry: ${qty.strawberry} box\n`;
        if(qty.keju > 0) struk += `- Sus Keju: ${qty.keju} box\n`;
        struk += `\nSubtotal: Rp ${data.sub.toLocaleString()}\n`;
        struk += `Diskon Level (${diskonPersen}%): -Rp ${data.pot.toLocaleString()}\n`;
        struk += `TOTAL BAYAR: Rp ${data.total.toLocaleString()}`;

        tg.sendData(struk);
    }
</script>
</body>
</html>
